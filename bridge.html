<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neural Prism | Refracting Signal...</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;900&display=swap');
        
        body {
            background-color: #020617;
            font-family: 'Inter', sans-serif;
            color: #f8fafc;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }

        .wave-container {
            width: 300px;
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 2rem;
        }

        .wave-bar {
            width: 6px;
            height: 20px;
            background: linear-gradient(to top, #6366f1, #00f2ff);
            border-radius: 10px;
            animation: wave 1.2s ease-in-out infinite;
        }

        @keyframes wave {
            0%, 100% { height: 20px; opacity: 0.3; }
            50% { height: 80px; opacity: 1; }
        }

        .wave-bar:nth-child(2) { animation-delay: 0.1s; }
        .wave-bar:nth-child(3) { animation-delay: 0.2s; }
        .wave-bar:nth-child(4) { animation-delay: 0.3s; }
        .wave-bar:nth-child(5) { animation-delay: 0.4s; }
        .wave-bar:nth-child(6) { animation-delay: 0.5s; }
        .wave-bar:nth-child(7) { animation-delay: 0.6s; }
        .wave-bar:nth-child(8) { animation-delay: 0.7s; }

        .glitch {
            position: relative;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 0.3em;
            font-style: italic;
        }

        .loader-ring {
            width: 48px;
            height: 48px;
            border: 2px solid rgba(99, 102, 241, 0.1);
            border-top: 2px solid #6366f1;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-top: 2rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Visual Voice Wave -->
    <div class="wave-container">
        <div class="wave-bar"></div>
        <div class="wave-bar"></div>
        <div class="wave-bar"></div>
        <div class="wave-bar"></div>
        <div class="wave-bar"></div>
        <div class="wave-bar"></div>
        <div class="wave-bar"></div>
        <div class="wave-bar"></div>
    </div>

    <div class="text-center space-y-4">
        <h1 id="status-text" class="text-xl glitch text-white">Refracting Node...</h1>
        <p id="subdomain-label" class="text-xs font-black text-indigo-400 uppercase tracking-[0.5em] opacity-60">Handshaking Spectrum</p>
    </div>

    <div class="loader-ring"></div>

    <script>
        (function() {
            // 1. Dynamic Subdomain Extraction
            const host = window.location.hostname;
            const parts = host.split('.');
            let subdomain = '';

            // Handle logic: extract first part if it's not www or root
            if (parts.length > 2 && parts[0] !== 'www') {
                subdomain = parts[0];
            } else {
                // Fallback for root or local development
                subdomain = 'hub';
            }

            const statusEl = document.getElementById('status-text');
            const labelEl = document.getElementById('subdomain-label');

            // 2. UI Update
            statusEl.innerText = `Launching ${subdomain.toUpperCase()}...`;
            labelEl.innerText = `Establishing Link to ${host}`;

            // 3. Construct Target URI with state preservation
            const search = window.location.search;
            const hash = window.location.hash;
            const target = `https://www.aivoicecast.com/apps/${subdomain}${search}${hash}`;

            // 4. Trace Log for Debugging
            console.log(`[Neural Router] Subdomain: ${subdomain}`);
            console.log(`[Neural Router] Redirection target: ${target}`);

            // 5. Orchestrated Delay for smooth visual experience
            setTimeout(() => {
                window.location.replace(target);
            }, 1500);
        })();
    </script>
</body>
</html>